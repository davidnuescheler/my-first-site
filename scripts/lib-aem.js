export function sampleRUM(e,t={}){sampleRUM.defer=sampleRUM.defer||[];let l=e=>{sampleRUM[e]=sampleRUM[e]||((...t)=>sampleRUM.defer.push({fnname:e,args:t}))};sampleRUM.drain=sampleRUM.drain||((e,t)=>{sampleRUM[e]=t,sampleRUM.defer.filter(({fnname:t})=>e===t).forEach(({fnname:e,args:t})=>sampleRUM[e](...t))}),sampleRUM.always=sampleRUM.always||[],sampleRUM.always.on=(e,t)=>{sampleRUM.always[e]=t},sampleRUM.on=(e,t)=>{sampleRUM.cases[e]=t},l("observe"),l("cwv");try{if(window.hlx=window.hlx||{},!window.hlx.rum){var a;let r=new URLSearchParams(window.location.search),o="on"===r.get("rum")?1:100,s=`${(0,window.location.href).split("").reduce((e,t)=>(e<<5)-e+t.charCodeAt(0)|0,0)}-${new Date().getTime()}-${Math.random().toString(16).substr(2,14)}`,i=Math.random();window.hlx.rum={weight:o,id:s,random:i,isSelected:i*o<1,sampleRUM,sanitizeURL:({full:()=>window.location.href,origin:()=>window.location.origin,path:()=>window.location.href.replace(/\?.*$/,"")})[window.hlx.RUM_MASK_URL||"path"]}}let{weight:n,id:c}=window.hlx.rum;window.hlx&&window.hlx.rum&&window.hlx.rum.isSelected&&(sampleRUM.cases=sampleRUM.cases||{cwv:()=>sampleRUM.cwv(t)||!0,lazy(){let e=document.createElement("script");return e.src="https://rum.hlx.page/.rum/@adobe/helix-rum-enhancer@^1/src/index.js",document.head.appendChild(e),!0}},((l=t)=>{let a=JSON.stringify({weight:n,id:c,referer:window.hlx.rum.sanitizeURL(),checkpoint:e,...t}),r=`https://rum.hlx.page/.rum/${n}`;navigator.sendBeacon(r,a),console.debug(`ping:${e}`,l)})(t),sampleRUM.cases[e]&&sampleRUM.cases[e]()),sampleRUM.always[e]&&sampleRUM.always[e](t)}catch(d){}}export async function loadCSS(e){return new Promise((t,l)=>{if(document.querySelector(`head > link[href="${e}"]`))t();else{let a=document.createElement("link");a.rel="stylesheet",a.href=e,a.onload=t,a.onerror=l,document.head.append(a)}})}export async function loadScript(e,t){return new Promise((l,a)=>{if(document.querySelector(`head > script[src="${e}"]`))l();else{let r=document.createElement("script");if(r.src=e,t)for(let o in t)r.setAttribute(o,t[o]);r.onload=l,r.onerror=a,document.head.append(r)}})}export function getMetadata(e){let t=e&&e.includes(":")?"property":"name",l=[...document.head.querySelectorAll(`meta[${t}="${e}"]`)].map(e=>e.content).join(", ");return l||""}export function toClassName(e){return"string"==typeof e?e.toLowerCase().replace(/[^0-9a-z]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}export function toCamelCase(e){return toClassName(e).replace(/-([a-z])/g,e=>e[1].toUpperCase())}let ICONS_CACHE={};export async function decorateIcons(e){let t=document.getElementById("franklin-svg-sprite");if(!t){let l=document.createElement("div");l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" id="franklin-svg-sprite" style="display: none"></svg>',t=l.firstElementChild,document.body.append(l.firstElementChild)}let a=[...e.querySelectorAll("span.icon")];await Promise.all(a.map(async e=>{let t=Array.from(e.classList).find(e=>e.startsWith("icon-")).substring(5);if(!ICONS_CACHE[t]){ICONS_CACHE[t]=!0;try{let l=await fetch(`${window.hlx.codeBasePath}/icons/${t}.svg`);if(!l.ok){ICONS_CACHE[t]=!1;return}let a=await l.text();a.match(/(<style | class=|url\(#| xlink:href="#)/)?ICONS_CACHE[t]={styled:!0,html:a.replaceAll(/ id="([^"]+)"/g,(e,l)=>` id="${t}-${l}"`).replaceAll(/="url\(#([^)]+)\)"/g,(e,l)=>`="url(#${t}-${l})"`).replaceAll(/ xlink:href="#([^"]+)"/g,(e,l)=>` xlink:href="#${t}-${l}"`)}:ICONS_CACHE[t]={html:a.replace("<svg",`<symbol id="icons-sprite-${t}"`).replace(/ width=".*?"/,"").replace(/ height=".*?"/,"").replace("</svg>","</symbol>")}}catch(r){ICONS_CACHE[t]=!1,console.error(r)}}}));let r=Object.keys(ICONS_CACHE).filter(e=>!t.querySelector(`#icons-sprite-${e}`)).map(e=>ICONS_CACHE[e]).filter(e=>!e.styled).map(e=>e.html).join("\n");t.innerHTML+=r,a.forEach(e=>{let t=Array.from(e.classList).find(e=>e.startsWith("icon-")).substring(5),l=e.firstElementChild?.tagName==="A"?e.firstElementChild:e;ICONS_CACHE[t].styled?l.innerHTML=ICONS_CACHE[t].html:l.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg"><use href="#icons-sprite-${t}"/></svg>`})}export async function fetchPlaceholders(e="default"){window.placeholders=window.placeholders||{};let t=window.placeholders[`${e}-loaded`];return t||(window.placeholders[`${e}-loaded`]=new Promise((t,l)=>{fetch(`${"default"===e?"":e}/placeholders.json`).then(e=>{if(e.ok)return e.json();throw Error(`${e.status}: ${e.statusText}`)}).then(l=>{let a={};l.data.filter(e=>e.Key).forEach(e=>{a[toCamelCase(e.Key)]=e.Text}),window.placeholders[e]=a,t()}).catch(t=>{window.placeholders[e]={},l(t)})})),await window.placeholders[`${e}-loaded`],window.placeholders[e]}export function decorateBlock(e){let t=e.classList[0];if(t){e.classList.add("block"),e.dataset.blockName=t,e.dataset.blockStatus="initialized";let l=e.parentElement;l.classList.add(`${t}-wrapper`);let a=e.closest(".section");a&&a.classList.add(`${t}-container`)}}export function readBlockConfig(e){let t={};return e.querySelectorAll(":scope > div").forEach(e=>{if(e.children){let l=[...e.children];if(l[1]){let a=l[1],r=toClassName(l[0].textContent),o="";if(a.querySelector("a")){let s=[...a.querySelectorAll("a")];o=1===s.length?s[0].href:s.map(e=>e.href)}else if(a.querySelector("img")){let i=[...a.querySelectorAll("img")];o=1===i.length?i[0].src:i.map(e=>e.src)}else if(a.querySelector("p")){let n=[...a.querySelectorAll("p")];o=1===n.length?n[0].textContent:n.map(e=>e.textContent)}else o=e.children[1].textContent;t[r]=o}}}),t}export function decorateSections(e){e.querySelectorAll(":scope > div").forEach(e=>{let t=[],l=!1;[...e.children].forEach(e=>{if("DIV"===e.tagName||!l){let a=document.createElement("div");t.push(a),(l="DIV"!==e.tagName)&&a.classList.add("default-content-wrapper")}t[t.length-1].append(e)}),t.forEach(t=>e.append(t)),e.classList.add("section"),e.dataset.sectionStatus="initialized",e.style.display="none";let a=e.querySelector("div.section-metadata");if(a){let r=readBlockConfig(a);Object.keys(r).forEach(t=>{if("style"===t){let l=r.style.split(",").map(e=>toClassName(e.trim()));l.forEach(t=>e.classList.add(t))}else e.dataset[toCamelCase(t)]=r[t]}),a.parentNode.remove()}})}export function updateSectionsStatus(e){let t=[...e.querySelectorAll(":scope > div.section")];for(let l=0;l<t.length;l+=1){let a=t[l],r=a.dataset.sectionStatus;if("loaded"!==r){let o=a.querySelector('.block[data-block-status="initialized"], .block[data-block-status="loading"]');if(o){a.dataset.sectionStatus="loading";break}a.dataset.sectionStatus="loaded",a.style.display=null}}}export function decorateBlocks(e){e.querySelectorAll("div.section > div > div").forEach(decorateBlock)}export function buildBlock(e,t){let l=Array.isArray(t)?t:[[t]],a=document.createElement("div");return a.classList.add(e),l.forEach(e=>{let t=document.createElement("div");e.forEach(e=>{let l=document.createElement("div"),a=e.elems?e.elems:[e];a.forEach(e=>{e&&("string"==typeof e?l.innerHTML+=e:l.appendChild(e))}),t.appendChild(l)}),a.appendChild(t)}),a}function getBlockConfig(e){let{blockName:t}=e.dataset,l=`${window.hlx.codeBasePath}/blocks/${t}/${t}.css`,a=`${window.hlx.codeBasePath}/blocks/${t}/${t}.js`,r={blockName:t,cssPath:l,jsPath:a};return window.hlx.patchBlockConfig.filter(e=>"function"==typeof e).reduce((e,t)=>t(e,r),{blockName:t,cssPath:l,jsPath:a})}export async function loadBlock(e){let t=e.dataset.blockStatus;if("loading"!==t&&"loaded"!==t){e.dataset.blockStatus="loading";let{blockName:l,cssPath:a,jsPath:r}=getBlockConfig(e);try{let o=loadCSS(a),s=new Promise(t=>{(async()=>{try{let a=await import(r);a.default&&await a.default(e)}catch(o){console.log(`failed to load module for ${l}`,o)}t()})()});await Promise.all([o,s])}catch(i){console.log(`failed to load block ${l}`,i)}e.dataset.blockStatus="loaded"}}export async function loadBlocks(e){updateSectionsStatus(e);let t=[...e.querySelectorAll("div.block")];for(let l=0;l<t.length;l+=1)await loadBlock(t[l]),updateSectionsStatus(e)}export function createOptimizedPicture(e,t="",l=!1,a=[{media:"(min-width: 600px)",width:"2000"},{width:"750"}]){let r=new URL(e,window.location.href),o=document.createElement("picture"),{pathname:s}=r,i=s.substring(s.lastIndexOf(".")+1);return a.forEach(e=>{let t=document.createElement("source");e.media&&t.setAttribute("media",e.media),t.setAttribute("type","image/webp"),t.setAttribute("srcset",`${s}?width=${e.width}&format=webply&optimize=medium`),o.appendChild(t)}),a.forEach((e,r)=>{if(r<a.length-1){let n=document.createElement("source");e.media&&n.setAttribute("media",e.media),n.setAttribute("srcset",`${s}?width=${e.width}&format=${i}&optimize=medium`),o.appendChild(n)}else{let c=document.createElement("img");c.setAttribute("loading",l?"eager":"lazy"),c.setAttribute("alt",t),o.appendChild(c),c.setAttribute("src",`${s}?width=${e.width}&format=${i}&optimize=medium`)}}),o}export function normalizeHeadings(e,t){let l=t.map(e=>e.toLowerCase());e.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(e=>{let t=e.tagName.toLowerCase();if(-1===l.indexOf(t)){let a=parseInt(t.charAt(1),10)-1;for(;-1===l.indexOf(`h${a}`)&&a>0;)a-=1;if(0===a)for(;-1===l.indexOf(`h${a}`)&&a<7;)a+=1;7!==a&&(e.outerHTML=`<h${a} id="${e.id}">${e.textContent}</h${a}>`)}})}export function decorateTemplateAndTheme(){let e=(e,t)=>{t.split(",").forEach(t=>{e.classList.add(toClassName(t.trim()))})},t=getMetadata("template");t&&e(document.body,t);let l=getMetadata("theme");l&&e(document.body,l)}export function decorateButtons(e){e.querySelectorAll("a").forEach(e=>{if(e.title=e.title||e.textContent,e.href!==e.textContent){let t=e.parentElement,l=e.parentElement.parentElement;e.querySelector("img")||(1===t.childNodes.length&&("P"===t.tagName||"DIV"===t.tagName)&&(e.className="button primary",t.classList.add("button-container")),1===t.childNodes.length&&"STRONG"===t.tagName&&1===l.childNodes.length&&"P"===l.tagName&&(e.className="button primary",l.classList.add("button-container")),1===t.childNodes.length&&"EM"===t.tagName&&1===l.childNodes.length&&"P"===l.tagName&&(e.className="button secondary",l.classList.add("button-container")))}})}export async function waitForLCP(e){let t=document.querySelector(".block"),l=t&&e.includes(t.dataset.blockName);l&&await loadBlock(t),document.body.style.display=null;let a=document.querySelector("main img");await new Promise(e=>{a&&!a.complete?(a.setAttribute("loading","eager"),a.addEventListener("load",e),a.addEventListener("error",e)):e()})}export function loadHeader(e){let t=buildBlock("header","");return e.append(t),decorateBlock(t),loadBlock(t)}export function loadFooter(e){let t=buildBlock("footer","");return e.append(t),decorateBlock(t),loadBlock(t)}export function setup(){window.hlx=window.hlx||{},window.hlx.RUM_MASK_URL="full",window.hlx.codeBasePath="",window.hlx.lighthouse="on"===new URLSearchParams(window.location.search).get("lighthouse"),window.hlx.patchBlockConfig=[];let e=document.querySelector('script[src$="/scripts/scripts.js"]');if(e)try{[window.hlx.codeBasePath]=new URL(e.src).pathname.split("/scripts/scripts.js")}catch(t){console.log(t)}}function init(){setup(),sampleRUM("top"),window.addEventListener("load",()=>sampleRUM("load")),window.addEventListener("unhandledrejection",e=>{sampleRUM("error",{source:e.reason.sourceURL,target:e.reason.line})}),window.addEventListener("error",e=>{sampleRUM("error",{source:e.filename,target:e.lineno})})}init();